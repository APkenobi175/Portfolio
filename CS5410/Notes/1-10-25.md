# Flappy Bird Clone — Input, Timers, and Pipe Spawning (Godot C# Notes)

## Scope
These notes cover:
- Godot **Input Map** and action-based input
- Using **Timer** nodes instead of manual time tracking
- What **PackedScene** is and why it’s required
- Why `[Export]` fields sometimes don’t appear
- Correct architecture for spawning pipes in Flappy Bird

---

## Input System (Action-Based)

### Core Rule
**Never check raw keys or mouse buttons directly.**  
Always check **actions** defined in the Input Map.

### Creating a Custom Input Action
1. Go to **Project → Project Settings → Input Map**
2. Add a new action:
   ```
   flap
   ```
3. Bind inputs:
   - Mouse Button → Left Click
   - Key → Space

### Using Input in Code
```csharp
Input.IsActionJustPressed("flap");
```

This:
- Supports keyboard and mouse
- Is easily remappable
- Works with controllers automatically

---

## Timers

### Why Use a Timer
A `Timer` node runs code at fixed intervals and replaces manual time tracking in `_Process()`.

Perfect for:
- Pipe spawning
- Enemy waves
- Periodic events

### Pipe Spawn Timer Setup
- Node: `Timer`
- Name: `PipeSpawner`
- Wait Time: ~1.5 seconds
- Autostart: ON
- One Shot: OFF

---

## Signals

Signals are Godot’s event system.

### Connecting a Timer Signal
1. Select the `PipeSpawner` node
2. Open the **Node** tab
3. Double-click `timeout()`
4. Target: `Main` (must have a script)

Godot generates a method that runs every time the timer fires.

---

## PackedScene

A **PackedScene** is a scene saved on disk that can be instantiated at runtime.

Think of it as:
- A blueprint
- A prefab
- A class definition

### Correct Usage
- `pipe_pair.tscn` → **PackedScene**
- `pipes` (Node2D) → container for spawned instances

Do **not** place `pipe_pair` directly in `Main` if it will be spawned repeatedly.

---

## Exported Variables

Exported variables appear in the Inspector and allow drag-and-drop references.

Example:
```csharp
[Export] public PackedScene PipePairScene { get; set; }
```

### If It Doesn’t Show Up
- Save the script
- Build → Build C# Project
- Re-select the node

Godot only shows exported fields after a successful compile.

---

## Pipe Spawning Architecture

### Responsibilities
**Main**
- Owns the Timer
- Spawns pipes
- Resets the game
- Tracks score

**PipePair**
- Moves left
- Deletes itself when off-screen
- Detects collisions

**Pipes (Node2D)**
- Empty container
- Holds all PipePair instances

---

## Pipe Spawn Logic (Conceptual)

When the timer fires:
1. Instantiate `PipePair` from the PackedScene
2. Set X position (constant, off-screen right)
3. Set Y position (random vertical offset)
4. Add as child of `pipes`

---

## Key Design Rule

If something is spawned repeatedly:
- It should **not** already exist in the scene tree
- It must be a **PackedScene**
