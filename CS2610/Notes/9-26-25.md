# SQL

### SQL Light

* An SQL light is not really a database and is mostly just stored in a file.
* The software that reads and writes to the database is YOUR software. The Django will handle it.
* the SQL language is a lot like english
* We need to create a table that we can put stuff in.
* Databases give us more than spreadsheets do but you can think of them as a spreadsheet
* A table has rows and columsn in it

### Create Table in SQL
```sql
CREATE TABLE user(id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, email TEXT NOT NULL);
```
* SQL is a case insensitive language, but conventionally everything is written in all caps
* now that you have a table you can insert stuff into it. to do that run the insert command
### Inserting data into the table in SQL
```sql
INSERT INTO user(name, email) VALUES ("Joseph", "joseph.ditton@usu.edu"), ("Catelyn", "fkaldsj;@gfjlk.com"), ("User man", "yeahbro@yeahbro.com");
```

### Accessing data from the table in SQL
* We can also get information from the table
* When selecting if we use the `*` then it will select all of them so.
```sql
select * from user;
```
* This is basically saying give me every column from every row in the user table
* If I wanted to just get the names I could do 
```sql
select name from user;
```
* you can also combine them, and do it any order. we are basically saying select this format from this table
```sql
select email, name from user;
```
* IF we want to make a query, we want to get an email from a user with id of 2 for example. 
```sql
select email from user where id=2
```
### Updating data in the table in SQL
* If we want to update data we can do that too
```sql
update user set name="Bob Bope" where id=2;
```
* This is saying to set the name to bob bope where the id is 2
* We can also delete data
```sql
delete from user where id=2;
```
* this deletes user with the id of 2.

### More Advanced Stuff
* You can count the number of rows by running the command:
```sql
select count(*) from databaseName
```
* You can start a timer by running
```sql
.timer ON
```
* Lets say you want to search the database for specific things. for examples transactions that are over $200
* THe following code block is how you would do that
```sql
select count(amount) from purchase_order where amount > 200
```
* This command is basically an extension of the count command.

### Storage and Preformance
* When working with large databases preformance and size becomes important
* We can optimize this by things called Indexes.

* Most databases store data in data pages, and these data pages have a max size. 
* When we ask a query for data it will start at page 1 and see if it can find it. and then go to page 2
* YOu can improve this by ordering the data in the table
* By default the data is sorted by its key. 
* These are indexes, its like an array
* In storage these pages live in different places so they may not be right next to each other. 
* We create whats called an index
### Index
* A data structure that is a B tree. 
	* A balanced tree that has nodes and is balanced so that the height of the tree is consistent for all the branches

* Our data pages are the leaf nodes of this tree
* The root node will say index x-y live on this side of the root and index z-q live on this side of the root node
* Then every other node will say that as well. 
* So now when we want to find the correct page it goes down the tree and finds it faster
* INstead of being a linear lookup its not a log2(n) lookup. 
* BY default an index is only created on the primary key. 

* We can also create index's. This isn't important and we don't need to memorize this
```sql
CREATE INDEX my_idx ON purchase_order(amount);
```
* This will organize all your data into the tree like structure so thats gonna take some time


# SQL CHEAT SHEET
### Querying Data
```sql
SELECT column1, column2 FROM table_name WHERE column1="the value I want" AND column2="the other value";
```
### Inserting Data
```sql
INSERT INTO table_name(column1, column2) VALUES ("value for column 1", "value for column 2");
```
### Deleting Data
```sql
DELETE FROM table_name WHERE column1="value I want";
```
### Updating Data
```sql
UPDATE table_name SET column1="new value" WHERE column1="the value I care about";
```
