# Building Applications with Django

### Setting up an Application

* You can use a module from `django.shortcuts` called **render**.
* This allows you to import HTML files instead of hardcoding them directly into `HttpResponse`.
* To do this, put your HTML files in a `templates/` folder.
* Inside `templates/`, include a subfolder named `core/` — that’s where your HTML files go.

---

### Forms in HTML

* Your input elements should have **names** — they act as variable identifiers.

```
[14/Sep/2025 21:51:27] "GET /passwords/?length=12&count=5 HTTP/1.1" 200 4
```

* When you submit a form, you can see the query parameters in the GET request.
* You can also make a POST request with the same information:

```html
<form action="/passwords/" method="post">
```

* You can retrieve information from GET or POST requests using `request.GET` or `request.POST`.

Example:

```python
from django.http import HttpRequest, HttpResponse

def passwords(request: HttpRequest):
    query = request.GET
    print(query.get("length", 1))
    print(query.get("count", 1))  # Using .get prevents KeyError and allows default values
    return HttpResponse("TEST")
```

* Everything from a request is a **string**, so if you need numeric values, convert them using `int()`.

---

### Django Template Tags

Django templates allow you to include variables and logic in HTML files. You pass a `context` dictionary to define which variables are available in the template.

```python
from django.shortcuts import render

def view(request):
    context = {
        "passwords": ["abc", "def"],
        "isAdmin": True
    }
    return render(request, "core/passwords.html", context)
```

You can then use these variables and control structures in your HTML:

{% raw %}

```html
{% if isAdmin %}
  <h2>You are the admin</h2>
{% endif %}

<main>
  <ul>
    {% for password in passwords %}
      <li>{{ password }}</li>
    {% endfor %}
  </ul>
</main>
```

{% endraw %}

---

### Loading Static Files (CSS, JS, Images)

Static files (like CSS) should be stored in `static/core/` inside your app folder.

At the top of your HTML file, load the static tag:

{% raw %}

```
{% load static %}
```

{% endraw %}

Then link your CSS file using the static helper:

{% raw %}

```html
<link rel="stylesheet" href="{% static 'core/styles.css' %}">
```

{% endraw %}

---

### More Django Terms to Know

* **Tags** — Commands inside `{% ... %}`.
* **Variables** — Values inside `{{ ... }}`.
* **Template Inheritance** — A base layout plus child templates that override specific blocks.
* **Child** — A template that inherits from a base layout.
* **Filters** — Post-process variables using `|`. Examples:

{% raw %}

```django
{{ name|upper }}
{{ text|truncatechars:80 }}
{{ date|date:"Y-m-d" }}
{{ value|default:"N/A" }}
{{ html|safe }}              <!-- disables escaping -->
{{ text|linebreaksbr }}      <!-- \n → <br> -->
```

{% endraw %}

---

### Creating Custom Filters and Tags

You can define your own template filters and tags in Python:

```python
# core/templatetags/extras.py
from django import template

register = template.Library()

@register.filter
def mul(value, arg):
    return value * arg

@register.simple_tag
def greet(name):
    return f"Hello, {name}"
```

Then load and use them in your template:

{% raw %}

```django
{% load extras %}
{{ 7|mul:6 }}        <!-- 42 -->
{% greet user.first_name %}
```

{% endraw %}
