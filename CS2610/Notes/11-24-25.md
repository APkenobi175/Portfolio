# VITE + Django

## Enviroment Variables

* .env file
* Everything is a string

```env
DATABASE_URL = .mydb.sqlite3
```

* Now we can import it

```python
from dotenv import load_env

load.env()
```

* Typically, you GIT ignore .env and have an .env.example file
* DON'T PUSH THE .ENV FILE TO GITHUB LOL
* We will need to be reading some variables from the enviroment


## DJANGO as an API

### What is an API

* API stands for Application programming interface. It is a set of protocols, rules and tools that allow different software applications to communicate and interact with each other. APIS define the methods and data structures that develpers can use to access and interact with the functionality provided by a particular software component, service, or platform. without needing to understand the internal details of how that functionality is implemented.

* IN simpler terms, an API acts as a bnridge that enables two different applications to talk to each other and ecvhange information or perform actions. It allows developers to build applications that leverage the capabilities of other software sstems without having to build those capabilities from scratch.

#### Scenarios where APIs are used

1. Web APIS
    * These are commonly used to enable communication between web servers, and web clients. They allows developers tpo reqiuest amd exchange data over the internet. Examples include twitter API, google maps API, and various social media platform APIS.
2. Library or Framework APIS
    * These are sets of functions and precedures that are bundled together in a library that can be called by develoipers to perform specific tasks. For example, programming languages often provgide standard libraries with APIS for tasks like file IO or math operations.
3. Operating System APIS
    * These provide functions for interacting with teh underlying operating system. They allow applications to access hardware resources, manage files, and perform other system-level tasks.
4. Software Development APIs
    * These are used by developers to extend or customize software development tools, IDEs, and other software related applications.

* APIS are a fundamental building block of modern software development, enabling the creation of complex and interconnected applications by leveraging existing services and functionality.

#### Getting Data from our server

* Implementing an endpoint that get our currently logged in user from the server
* We are gonna make a GET request

* First lets make a log in required view
* We are gonna use the model to dict function to convert it to a json response
* This is done on the backend by Django
* After creating the view we need to add it to our `urls.py` file

```python
@login_required
def me(req):
    # get currently logged in user
    # return json response
    return JsonResponse ({"user": model_to_dict(req.user)} )
```

* Now we need to make a front end request to this endpoint
* To do this we will use the fetch API
* We need to include `credentials: "same-origin"` to include cookies


```jsx
const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  async function getUser(){
    const res = fetch("/me/", {
      credentials: "same-origin", // include cookies!
    });
    const body = await res.json();
    setUser(body.user);
    setLoading(false);
    console.log(body);
  }

  useEffect(() => {
    getUser();
  }, []);
```
```jsx
  return (
    <>
      {loading && <div>Loading...</div>}
      {user && <div>Hello {user.first_name}</div>}
      <button onClick={logout}>Logout</button>
    </>
  )
```